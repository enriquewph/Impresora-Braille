!function(n,o,e){"use strict";function t(n){f=u,"usa"===n&&(f=d),e("#buy").find("a").attr("href",f),r()}function r(){ArduinoAuthHelper.getToken().then(function(n){g(n),v(n)})}var a=e(".main-nav"),s=e(".arduino-nav"),i=e(".cart-submenu"),c=e(".nav-left"),l=e("body"),u="https://store.arduino.cc",d="https://store.arduino.cc/usa",f=u,p=function(){l.addClass("noscroll"),i.show()},h=function(){l.removeClass("noscroll"),i.hide()},m=function(n){var o={"X-Requested-With":"XMLHttpRequest"};return n&&(o.Authorization="Bearer "+n),o},g=function(n){jQuery.ajax({url:f+"/cart/api/count?ajax=1",xhrFields:{withCredentials:!0},headers:m(n),success:function(n){var o=n.count,e=jQuery("#cart").find(".badge");e.html(o),e.toggle(o>0),0===o&&window.innerWidth<415&&setTimeout(function(){h()},4e3)},error:function(n){console.error(n)}})},v=function(n){jQuery.ajax({url:f+"/cart/api/minicart?ajax=1",xhrFields:{withCredentials:!0},headers:m(n),success:function(n){var o=n.content;i.find(".dropdown-box").html(o)},error:function(n){console.error("Can't fetch cart data"),console.error(n)}})};t(ArduinoGeo.get());var w=window.location.protocol+"//"+window.location.hostname,b=e("#searchform"),C=e("#searchform-mobile");if(-1!==w.indexOf("store")){var k="/catalogsearch/result/",x=e(".eu-africa");"usa"===ArduinoGeo.get()&&(k="/usa/catalogsearch/result/",x=e(".america-asia")),b.attr("action",k),C.attr("action",k),x.show()}else-1!==w.indexOf("blog")?(b.attr("action",w),C.attr("action",w),e(".search-typing").attr("id","s").attr("name","s")):(b.find(".fill-it").val(w),C.find(".fill-it").val(w));e("#search-bar").on("click",function(){s.addClass("search-open")}),e("html").on("click",function(n){e(n.target).hasClass("search-typing")||"search-bar"===n.target.id||s.removeClass("search-open"),0===e(n.target).parents(".burger-menu").length&&0===e(n.target).parents(".nav-left").length&&(c.removeClass("open"),c.find(".nav-submenu").removeClass("open")),0===e(n.target).parents(".profile-dropdown").length&&0===e(n.target).is(".profile-dropdown")&&e(".profile-dropdown").find(".nav-submenu").removeClass("open")}),e(window).scroll(function(){s.removeClass("search-open"),e(document).scrollTop()>100?s.addClass("collapsed"):s.removeClass("collapsed")}),e(".burger-menu").on("click",function(){c.toggleClass("open"),c.hasClass("open")?l.addClass("noscroll"):l.removeClass("noscroll"),c.find(".nav-submenu").removeClass("open"),e(".profile-dropdown").find(".nav-submenu").removeClass("open")}),e(".nav-left .has-submenu").on("click",function(){c.find(".has-submenu").not(this).find(".nav-submenu").removeClass("open"),e(this).find(".nav-submenu").toggleClass("open"),h()}),e(".profile-dropdown").on("click",function(){e(this).find(".nav-submenu").toggleClass("open"),c.removeClass("open"),l.removeClass("noscroll"),h()}),a.find(".cart-dropdown-trigger").on("click",function(){e(".cart-submenu:hidden").length>0?(p(),c.removeClass("open"),e(".profile-dropdown").find(".nav-submenu").removeClass("open"),t(ArduinoGeo.get())):h()}),a.find(".cart-dropdown-trigger").on("mouseleave",function(){h()}),e(".cart-dropdown-trigger").find(".cart-close-button").on("click",function(){h()});var j=e(".quotes-submenu");a.find(".quotes-dropdown-trigger").on("click",function(){e(".quotes-submenu:hidden").length>0?(j.show(),c.removeClass("open"),e(".profile-dropdown").find(".nav-submenu").removeClass("open")):j.hide()}),a.find(".quotes-dropdown-trigger").on("mouseleave",function(){j.hide()}),e(".quotes-dropdown-trigger").find(".cart-close-button").on("click",function(){j.hide()}),e(".store-location-button").find(".cart-close-button").on("click",function(){localStorage.setItem("location-aware",!0)})}(window,document,window.jQuery);