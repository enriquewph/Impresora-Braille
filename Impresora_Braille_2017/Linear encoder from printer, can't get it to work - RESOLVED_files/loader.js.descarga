var ArduinoGeo=ArduinoGeo||function(){var e=function(e){var n=" "+document.cookie,t=n.indexOf(" "+e+"=");if(-1===t)n=null;else{t=n.indexOf("=",t)+1;var o=n.indexOf(";",t);-1===o&&(o=n.length),n=unescape(n.substring(t,o))}return n}("georestriction_selection");return{get:function(){return e}}}(),ArduinoAuthHelper=ArduinoAuthHelper||function(){var e,n=!1,t={init:function(){e=jQuery.Deferred()},authURL:"https://auth.arduino.cc/",getToken:function(){return e.then(function(e){return e?e.token:null})},setToken:function(t){n=!!t,e.resolve(t)},setLoggedOut:function(){t.setToken(null)},isLoggedIn:function(){return n}};return t}(),ArduinoHeaderAndFooter=ArduinoHeaderAndFooter||function(){function e(e){return new Promise(function(n,t){var o=document.getElementsByTagName("head")[0],r=document.createElement("script");r.src=e,r.onload=r.onreadystatechange=n,r.onabort=r.onerror=t,o.appendChild(r)})}function n(e){return new Promise(function(n,t){var o=document.getElementsByTagName("head")[0],r=document.createElement("link");r.rel="stylesheet",r.href=e,r.onload=r.onreadystatechange=n,r.onabort=r.onerror=n,o.insertBefore(r,o.firstChild)})}function t(e,n){return new Promise(function(t,o){var r=i+"/"+n+"/"+e+".html";jQuery.ajaxSetup({timeout:5e4}),jQuery("#"+e).load(r,function(e,n,i){return"success"!==n?o("failure to inject "+r):t("imported "+r)})})}function o(e,n){var t,o,i,s,f,l=n.token;t=o=jQuery(".login-button");var d=jQuery(".logout");return e?(i=jQuery(".user-profile .userpic"),s=jQuery(".user-profile .default"),f=jQuery(".user-profile")):(o=jQuery(".login-button a"),i=jQuery(".profile img.user"),s=jQuery(".profile svg.default"),f=jQuery(".auth-required")),n.token().then(function(e){return ArduinoAuthHelper.setToken(e),c(e.token),r(e.token)}).then(function(e){t.hide();var n=e.public.avatar;return i.attr("src",n),s.hide(),i.show(),n||(s.show(),i.hide()),i.on("error",function(){s.show(),i.hide()}),f.show(),d.on("click",function(){sessionStorage.removeItem("oauth_redirect");var e=window.location.href;window.location.replace(a+"logout?redirect_uri="+e)}),Promise.resolve(l)}).catch(function(){ArduinoAuthHelper.setLoggedOut();var e=n.redirectURI();return o.attr("href",e),t.show(),f.hide(),-1!==u.indexOf(window.location.hostname)&&jQuery(".main-nav").find(".cart-dropdown-trigger").show(),Promise.resolve(e)})}function r(e){return new Promise(function(n,t){jQuery.ajax({url:a+"v1/users/byID/me?scopes=public",success:function(e){n(e)},headers:{Authorization:"Bearer "+e},error:t})})}var i="https://cdn.arduino.cc/header-footer/8irqikrxrq",u="https://store.arduino.cc";"usa"===ArduinoGeo.get()&&(u="https://store.arduino.cc/usa");var a=ArduinoAuthHelper.authURL,c=function(e){jQuery.ajax({url:"https://forum.arduino.cc/index.php?api&pm&json",headers:{Authorization:"Bearer "+e},success:function(e){e.data>0&&(jQuery(".profile .badge").html(e.data),jQuery(".profile .badge").show())},error:function(e){console.error(e)}})};return function(r){var u=["header","footer","newsletter-modal"];r.parts&&(u=r.parts);var c="en";r.lang&&(c=r.lang);var s,f=-1!==u.indexOf("create-nav");return new Promise(function(n,t){return"undefined"==typeof jQuery?n(e("https://code.jquery.com/jquery-2.1.1.min.js")):n()}).then(function(){ArduinoAuthHelper.init()}).then(function(){jQuery.get(i+"/create-nav-images/icons.svg",function(e){var n=document.createElement("div");n.className="icons",n.style.display="none",n.innerHTML=(new XMLSerializer).serializeToString(e.documentElement),document.body.insertBefore(n,document.body.childNodes[0])});for(var e=[],n=0;n<u.length;n++)e.push(t(u[n],c));return Promise.all(e)}).then(function(){for(var e=[],t=0;t<u.length;t++)e.push(n(i+"/css/"+u[t]+".css"));return Promise.all(e)}).then(function(){for(var n=[],t=0;t<u.length;t++)n.push(e(i+"/js/"+u[t]+".js"));return"default"===r.auth&&n.push(e(i+"/login.js")),Promise.all(n)}).then(function(){return"default"===r.auth?(r.authOptions.cookieName="arduino_authenticated",r.authOptions.logoutURI||(r.authOptions.logoutURI=a+"logout"),r.authUri||(r.authUri=a+"login"),s=o(f,new Oauth2(r.authOptions))):"custom"===r.auth?s=o(f,r.authOptions):(-1!==a.indexOf(window.location.hostname)&&(s="loggedout",ArduinoAuthHelper.setLoggedOut(),jQuery(".login-button").show(),jQuery(".login-button").find("a").attr("href","/login")),Promise.resolve(s))}).then(function(){return r.langSelector&&jQuery(".language-selector").show(),f?jQuery("#ino-create-nav").show():jQuery(".main-nav").show(),Promise.resolve(s)})}}();!function(e){function n(){}function t(e,n){return function(){e.apply(n,arguments)}}function o(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],s(e,this)}function r(e,n){for(;3===e._state;)e=e._value;return 0===e._state?void e._deferreds.push(n):(e._handled=!0,void o._immediateFn(function(){var t=1===e._state?n.onFulfilled:n.onRejected;if(null!==t){var o;try{o=t(e._value)}catch(e){return void u(n.promise,e)}i(n.promise,o)}else(1===e._state?i:u)(n.promise,e._value)}))}function i(e,n){try{if(n===e)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==typeof n||"function"==typeof n)){var r=n.then;if(n instanceof o)return e._state=3,e._value=n,void a(e);if("function"==typeof r)return void s(t(r,n),e)}e._state=1,e._value=n,a(e)}catch(n){u(e,n)}}function u(e,n){e._state=2,e._value=n,a(e)}function a(e){2===e._state&&0===e._deferreds.length&&o._immediateFn(function(){e._handled||o._unhandledRejectionFn(e._value)});for(var n=0,t=e._deferreds.length;n<t;n++)r(e,e._deferreds[n]);e._deferreds=null}function c(e,n,t){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof n?n:null,this.promise=t}function s(e,n){var t=!1;try{e(function(e){t||(t=!0,i(n,e))},function(e){t||(t=!0,u(n,e))})}catch(e){if(t)return;t=!0,u(n,e)}}var f=setTimeout;o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,t){var o=new this.constructor(n);return r(this,new c(e,t,o)),o},o.all=function(e){var n=Array.prototype.slice.call(e);return new o(function(e,t){function o(i,u){try{if(u&&("object"==typeof u||"function"==typeof u)){var a=u.then;if("function"==typeof a)return void a.call(u,function(e){o(i,e)},t)}n[i]=u,0==--r&&e(n)}catch(e){t(e)}}if(0===n.length)return e([]);for(var r=n.length,i=0;i<n.length;i++)o(i,n[i])})},o.resolve=function(e){return e&&"object"==typeof e&&e.constructor===o?e:new o(function(n){n(e)})},o.reject=function(e){return new o(function(n,t){t(e)})},o.race=function(e){return new o(function(n,t){for(var o=0,r=e.length;o<r;o++)e[o].then(n,t)})},o._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){f(e,0)},o._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},o._setImmediateFn=function(e){o._immediateFn=e},o._setUnhandledRejectionFn=function(e){o._unhandledRejectionFn=e},"undefined"!=typeof module&&module.exports?module.exports=o:e.Promise||(e.Promise=o)}(this);